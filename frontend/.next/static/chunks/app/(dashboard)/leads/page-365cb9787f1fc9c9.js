(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{1010:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1055:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>f});var s=l(5155),t=l(2115),r=l(5299),i=l(6191),d=l(6651),o=l(3664),n=l(9141),c=l(1847);let u=(0,c.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var x=l(1169);let m=(0,c.A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var g=l(5229),h=l(6132),p=l(1010),b=l(7621);function f(){var e,a;let[l,c]=(0,t.useState)(""),[f,y]=(0,t.useState)([]),[v,j]=(0,t.useState)([]),[N,w]=(0,t.useState)(null),[k,I]=(0,t.useState)([]),[A,S]=(0,t.useState)(!0),[C,M]=(0,t.useState)(null),[F,E]=(0,t.useState)(0),[L,z]=(0,t.useState)(!1),[P,_]=(0,t.useState)(!1),[q,O]=(0,t.useState)(null),[T,D]=(0,t.useState)(!1),[H,B]=(0,t.useState)(""),[R,U]=(0,t.useState)({email:"",firstName:"",lastName:"",phone:"",status:"lead",source:"manual",tags:[]}),W=async()=>{try{let e=await b.A.get("/pipelines");j(e.data);let a=e.data.find(e=>e.isDefault)||e.data[0];return w(a),!0}catch(e){return console.error("Failed to fetch pipelines:",e),M("Failed to load pipelines. Please refresh the page or try logging in again."),!1}},G=async()=>{try{let e=await b.A.get("/users");return I(e.data),!0}catch(e){return console.error("Failed to fetch users:",e),!1}},J=async()=>{try{S(!0);let e={page:1,limit:200};l&&(e.search=l),N&&(e.pipelineId=N.id);let a=await b.A.get("/contacts",{params:e});console.log("Leads response:",a.data),y(a.data.contacts||a.data.data||[]),E(a.data.total||0)}catch(e){console.error("Failed to fetch contacts:",e),M("Failed to load leads")}finally{S(!1)}};(0,t.useEffect)(()=>{(async()=>{S(!0);let[e]=await Promise.all([W(),G()]);e||S(!1)})()},[]),(0,t.useEffect)(()=>{N&&J()},[l,N]);let V=()=>{var e;U({email:"",firstName:"",lastName:"",phone:"",status:"lead",source:"manual",tags:[],pipelineId:null==N?void 0:N.id,pipelineStageId:null==N||null==(e=N.stages[0])?void 0:e.id}),B("")},K=async e=>{var a,l,s,t,r,i;e.preventDefault(),B(""),D(!0);try{let e={firstName:R.firstName,lastName:R.lastName,email:R.email,status:R.status,source:R.source,tags:R.tags};(null==(a=R.phone)?void 0:a.trim())&&(e.phone=R.phone.trim()),(null==(l=R.notes)?void 0:l.trim())&&(e.notes=R.notes.trim()),R.companyId&&(e.companyId=R.companyId),R.pipelineId&&(e.pipelineId=R.pipelineId),R.pipelineStageId&&(e.pipelineStageId=R.pipelineStageId),R.setterId&&(e.setterId=R.setterId),R.callerId&&(e.callerId=R.callerId),R.closerId&&(e.closerId=R.closerId),console.log("Sending contact data:",e);let s=await b.A.post("/contacts",e);z(!1),V(),s.data&&(y(e=>[s.data,...e]),E(e=>e+1)),setTimeout(()=>{J()},500)}catch(e){console.error("Failed to create contact:",e),B((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||(null==(i=e.response)||null==(r=i.data)?void 0:r.error)||"Failed to create lead")}finally{D(!1)}},Q=async e=>{var a,l,s,t;if(e.preventDefault(),q){B(""),D(!0);try{let e={firstName:R.firstName,lastName:R.lastName,email:R.email,status:R.status,source:R.source};if((null==(a=R.phone)?void 0:a.trim())&&(e.phone=R.phone.trim()),(null==(l=R.notes)?void 0:l.trim())&&(e.notes=R.notes.trim()),R.pipelineId||R.pipelineStageId||R.setterId||R.callerId||R.closerId){let e={};R.pipelineId&&(e.pipelineId=R.pipelineId),R.pipelineStageId&&(e.pipelineStageId=R.pipelineStageId),R.setterId&&(e.setterId=R.setterId),R.callerId&&(e.callerId=R.callerId),R.closerId&&(e.closerId=R.closerId),await b.A.put("/pipelines/contacts/".concat(q.id),e)}await b.A.put("/contacts/".concat(q.id),e),_(!1),O(null),V(),J()}catch(e){console.error("Failed to update contact:",e),B((null==(t=e.response)||null==(s=t.data)?void 0:s.message)||"Failed to update lead")}finally{D(!1)}}},X=k.filter(e=>"setter"===e.role),Y=k.filter(e=>"caller"===e.role),Z=k.filter(e=>"closer"===e.role);return A&&0===v.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsx)(r.A,{className:"h-8 w-8 animate-spin text-indigo-600"})}):C?(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-red-600 font-semibold",children:C})})}):(0,s.jsxs)("div",{className:"space-y-6 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Pipeline"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Manage your leads through the sales pipeline (",F," total)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("button",{onClick:J,disabled:A,className:"flex items-center gap-2 rounded-xl bg-white border border-gray-300 px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all disabled:opacity-50",children:[A?(0,s.jsx)(r.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),(0,s.jsxs)("button",{onClick:()=>z(!0),className:"flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg hover:shadow-xl transition-all",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),"Add Lead"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"relative w-64",children:(0,s.jsx)("select",{value:(null==N?void 0:N.id)||"",onChange:e=>{w(v.find(a=>a.id===e.target.value)||null)},className:"w-full rounded-xl border border-gray-300 bg-white py-3 px-4 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:v.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," ",e.isDefault&&"(Default)"]},e.id))})}),(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(d.A,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-indigo-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search leads by name, email, or company...",value:l,onChange:e=>c(e.target.value),className:"w-full rounded-xl border border-indigo-200/50 bg-white/50 py-3 pl-11 pr-4 text-sm placeholder:text-gray-500 focus:border-indigo-400 focus:bg-white focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all shadow-sm"})]})]}),N&&(0,s.jsx)("div",{className:"flex-1 overflow-x-auto pb-6",children:(0,s.jsx)("div",{className:"flex gap-4 min-w-max h-full",children:N.stages.sort((e,a)=>e.displayOrder-a.displayOrder).map(e=>{var a;let l,t=(l=e.id,f.filter(e=>e.pipelineStageId===l)),r=((a=e.color).replace("#",""),{gradient:"linear-gradient(135deg, ".concat(a,", ").concat(a,"dd)"),bg:a});return(0,s.jsxs)("div",{className:"flex flex-col w-80 bg-gray-50 rounded-xl border border-gray-200 shadow-sm",children:[(0,s.jsx)("div",{className:"p-4 rounded-t-xl",style:{background:r.gradient},children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-white",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("h3",{className:"font-semibold",children:e.name})}),(0,s.jsx)("span",{className:"bg-white/20 px-2.5 py-1 rounded-full text-xs font-bold",children:t.length})]})}),(0,s.jsx)("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto max-h-[calc(100vh-280px)]",children:0===t.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No leads in this stage"}):t.map(e=>{var a;return(0,s.jsxs)("div",{onClick:()=>{O(e),U({email:e.email,firstName:e.firstName,lastName:e.lastName,phone:e.phone||"",status:e.status,source:e.source,notes:e.notes,tags:e.tags,pipelineId:e.pipelineId,pipelineStageId:e.pipelineStageId,setterId:e.setterId,callerId:e.callerId,closerId:e.closerId}),_(!0)},className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-all cursor-pointer group",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:[e.firstName," ",e.lastName]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mb-1",children:[(0,s.jsx)(o.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{className:"truncate",children:e.email})]}),e.phone&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mb-1",children:[(0,s.jsx)(n.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.phone})]}),e.company&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[(0,s.jsx)(u,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.company.name})]})]}),(e.setter||e.caller||e.closer)&&(0,s.jsxs)("div",{className:"mb-3 p-2 bg-gray-50 rounded text-xs space-y-1",children:[e.setter&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(x.A,{className:"h-3 w-3 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Setter:"}),(0,s.jsx)("span",{className:"font-medium",children:e.setter.firstName})]}),e.caller&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(n.A,{className:"h-3 w-3 text-purple-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Caller:"}),(0,s.jsx)("span",{className:"font-medium",children:e.caller.firstName})]}),e.closer&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m,{className:"h-3 w-3 text-green-600"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Closer:"}),(0,s.jsx)("span",{className:"font-medium",children:e.closer.firstName})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Lead Score"}),(0,s.jsxs)("span",{className:"text-xs font-bold text-gray-900",children:[e.leadScore,"/100"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,s.jsx)("div",{className:"h-1.5 rounded-full transition-all ".concat((a=e.leadScore)>=75?"bg-green-500":a>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.leadScore,"%")}})})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["Added ",new Date(e.createdAt).toLocaleDateString()]})]},e.id)})})]},e.id)})})}),L&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:(0,s.jsxs)("div",{className:"relative w-full max-w-3xl mx-4 glass-effect rounded-2xl shadow-2xl animate-scale-in max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white rounded-t-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Lead"}),(0,s.jsx)("button",{onClick:()=>{z(!1),V()},className:"rounded-xl p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-all",children:(0,s.jsx)(g.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:K,className:"p-6 space-y-5",children:[H&&(0,s.jsxs)("div",{className:"flex items-start gap-3 rounded-xl bg-red-50 border border-red-200 p-4",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 text-red-600 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-red-900",children:"Error"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:H})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name *"}),(0,s.jsx)("input",{type:"text",required:!0,disabled:T,value:R.firstName,onChange:e=>U({...R,firstName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"John"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",required:!0,disabled:T,value:R.lastName,onChange:e=>U({...R,lastName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"Doe"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,s.jsx)("input",{type:"email",required:!0,disabled:T,value:R.email,onChange:e=>U({...R,email:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"john@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),(0,s.jsx)("input",{type:"tel",disabled:T,value:R.phone,onChange:e=>U({...R,phone:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"+1 (555) 123-4567"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pipeline"}),(0,s.jsx)("select",{disabled:T,value:R.pipelineId||(null==N?void 0:N.id),onChange:e=>{var a;let l=v.find(a=>a.id===e.target.value);U({...R,pipelineId:e.target.value,pipelineStageId:null==l||null==(a=l.stages[0])?void 0:a.id})},className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:v.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stage"}),(0,s.jsx)("select",{disabled:T,value:R.pipelineStageId||"",onChange:e=>U({...R,pipelineStageId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:null==(e=v.find(e=>e.id===(R.pipelineId||(null==N?void 0:N.id))))?void 0:e.stages.sort((e,a)=>e.displayOrder-a.displayOrder).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Setter"}),(0,s.jsxs)("select",{disabled:T,value:R.setterId||"",onChange:e=>U({...R,setterId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"",children:"None"}),X.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Caller"}),(0,s.jsxs)("select",{disabled:T,value:R.callerId||"",onChange:e=>U({...R,callerId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"",children:"None"}),Y.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Closer"}),(0,s.jsxs)("select",{disabled:T,value:R.closerId||"",onChange:e=>U({...R,closerId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"",children:"None"}),Z.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Source"}),(0,s.jsxs)("select",{disabled:T,value:R.source,onChange:e=>U({...R,source:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"manual",children:"Manual"}),(0,s.jsx)("option",{value:"website",children:"Website"}),(0,s.jsx)("option",{value:"referral",children:"Referral"}),(0,s.jsx)("option",{value:"social_media",children:"Social Media"}),(0,s.jsx)("option",{value:"email_campaign",children:"Email Campaign"}),(0,s.jsx)("option",{value:"cold_outreach",children:"Cold Outreach"}),(0,s.jsx)("option",{value:"event",children:"Event"}),(0,s.jsx)("option",{value:"facebook",children:"Facebook"}),(0,s.jsx)("option",{value:"instagram",children:"Instagram"}),(0,s.jsx)("option",{value:"linkedin",children:"LinkedIn"}),(0,s.jsx)("option",{value:"google-ads",children:"Google Ads"}),(0,s.jsx)("option",{value:"slack",children:"Slack"}),(0,s.jsx)("option",{value:"typeform",children:"Typeform"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,s.jsx)("textarea",{disabled:T,value:R.notes,onChange:e=>U({...R,notes:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 resize-none disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"Add any additional notes about this lead..."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{z(!1),V()},disabled:T,className:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:T,className:"px-6 py-3 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all",children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.A,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),"Create Lead"]})})]})]})]})}),P&&q&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:(0,s.jsxs)("div",{className:"relative w-full max-w-3xl mx-4 glass-effect rounded-2xl shadow-2xl animate-scale-in max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white rounded-t-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Lead"}),(0,s.jsx)("button",{onClick:()=>{_(!1),O(null),V()},className:"rounded-xl p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-all",children:(0,s.jsx)(g.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:Q,className:"p-6 space-y-5",children:[H&&(0,s.jsxs)("div",{className:"flex items-start gap-3 rounded-xl bg-red-50 border border-red-200 p-4",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 text-red-600 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-red-900",children:"Error"}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:H})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name *"}),(0,s.jsx)("input",{type:"text",required:!0,disabled:T,value:R.firstName,onChange:e=>U({...R,firstName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",required:!0,disabled:T,value:R.lastName,onChange:e=>U({...R,lastName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,s.jsx)("input",{type:"email",required:!0,disabled:T,value:R.email,onChange:e=>U({...R,email:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),(0,s.jsx)("input",{type:"tel",disabled:T,value:R.phone,onChange:e=>U({...R,phone:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pipeline"}),(0,s.jsx)("select",{disabled:T,value:R.pipelineId||"",onChange:e=>{var a;let l=v.find(a=>a.id===e.target.value);U({...R,pipelineId:e.target.value,pipelineStageId:null==l||null==(a=l.stages[0])?void 0:a.id})},className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:v.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stage"}),(0,s.jsx)("select",{disabled:T,value:R.pipelineStageId||"",onChange:e=>U({...R,pipelineStageId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:null==(a=v.find(e=>e.id===R.pipelineId))?void 0:a.stages.sort((e,a)=>e.displayOrder-a.displayOrder).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Setter"}),(0,s.jsxs)("select",{disabled:T,value:R.setterId||"",onChange:e=>U({...R,setterId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"",children:"None"}),X.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Caller"}),(0,s.jsxs)("select",{disabled:T,value:R.callerId||"",onChange:e=>U({...R,callerId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"",children:"None"}),Y.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Closer"}),(0,s.jsxs)("select",{disabled:T,value:R.closerId||"",onChange:e=>U({...R,closerId:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"",children:"None"}),Z.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Source"}),(0,s.jsxs)("select",{disabled:T,value:R.source,onChange:e=>U({...R,source:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,s.jsx)("option",{value:"manual",children:"Manual"}),(0,s.jsx)("option",{value:"website",children:"Website"}),(0,s.jsx)("option",{value:"referral",children:"Referral"}),(0,s.jsx)("option",{value:"social_media",children:"Social Media"}),(0,s.jsx)("option",{value:"email_campaign",children:"Email Campaign"}),(0,s.jsx)("option",{value:"cold_outreach",children:"Cold Outreach"}),(0,s.jsx)("option",{value:"event",children:"Event"}),(0,s.jsx)("option",{value:"facebook",children:"Facebook"}),(0,s.jsx)("option",{value:"instagram",children:"Instagram"}),(0,s.jsx)("option",{value:"linkedin",children:"LinkedIn"}),(0,s.jsx)("option",{value:"google-ads",children:"Google Ads"}),(0,s.jsx)("option",{value:"slack",children:"Slack"}),(0,s.jsx)("option",{value:"typeform",children:"Typeform"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,s.jsx)("textarea",{disabled:T,value:R.notes,onChange:e=>U({...R,notes:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 resize-none disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"Add any additional notes about this lead..."})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{_(!1),O(null),V()},disabled:T,className:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:T,className:"px-6 py-3 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all",children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.A,{className:"h-4 w-4 animate-spin"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"Update Lead"]})})]})]})]})})]})}},1169:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},3664:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},5229:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5299:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6132:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6651:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6911:(e,a,l)=>{Promise.resolve().then(l.bind(l,1055))},7621:(e,a,l)=>{"use strict";l.d(a,{A:()=>n});var s=l(5125);let t="https://slackcrm-backend.fly.dev/api/v1",r=s.A.create({baseURL:t,headers:{"Content-Type":"application/json"}}),i=!1,d=[],o=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d.forEach(l=>{e?l.reject(e):l.resolve(a)}),d=[]};r.interceptors.request.use(e=>{{let a=localStorage.getItem("accessToken");a&&e.headers&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{var a;let l=e.config;if((null==(a=e.response)?void 0:a.status)===401&&!l._retry){if(i)return new Promise((e,a)=>{d.push({resolve:e,reject:a})}).then(e=>(l.headers&&(l.headers.Authorization="Bearer ".concat(e)),r(l))).catch(e=>Promise.reject(e));l._retry=!0,i=!0;{let a=localStorage.getItem("refreshToken");if(!a)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{accessToken:e,refreshToken:d}=(await s.A.post("".concat(t,"/auth/refresh"),{refreshToken:a})).data;return localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",d),l.headers&&(l.headers.Authorization="Bearer ".concat(e)),o(null,e),i=!1,r(l)}catch(e){return o(e,null),i=!1,localStorage.clear(),window.location.href="/login",Promise.reject(e)}}}return Promise.reject(e)});let n=r},9141:(e,a,l)=>{"use strict";l.d(a,{A:()=>s});let s=(0,l(1847).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=6911)),_N_E=e.O()}]);