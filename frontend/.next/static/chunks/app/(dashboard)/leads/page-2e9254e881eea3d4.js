(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{890:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},1524:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},3664:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},5229:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5299:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6132:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6485:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6651:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6911:(e,a,t)=>{Promise.resolve().then(t.bind(t,7584))},6921:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},7584:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j});var l=t(5155),s=t(2115),r=t(1847);let o=(0,r.A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var i=t(9141),n=t(890);let d=(0,r.A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var c=t(1524),h=t(6921),m=t(6485),x=t(5299),u=t(6191),g=t(6651),p=t(3664);let b=(0,r.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var y=t(5229),f=t(6132),v=t(7621);function j(){var e;let[a,t]=(0,s.useState)(""),[r,j]=(0,s.useState)([]),[N,w]=(0,s.useState)(!0),[k,A]=(0,s.useState)(null),[C,M]=(0,s.useState)(0),[S,L]=(0,s.useState)(!1),[z,E]=(0,s.useState)(!1),[F,_]=(0,s.useState)(""),[q,I]=(0,s.useState)({email:"",firstName:"",lastName:"",phone:"",status:"lead",source:"manual",tags:["new-lead"]}),P=[{id:"new-lead",name:"New Lead",icon:o,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",textColor:"text-blue-700"},{id:"call-1",name:"Call 1",icon:i.A,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50",textColor:"text-purple-700"},{id:"call-2",name:"Call 2",icon:i.A,color:"from-indigo-500 to-indigo-600",bgColor:"bg-indigo-50",textColor:"text-indigo-700"},{id:"zoom",name:"Zoom",icon:n.A,color:"from-cyan-500 to-cyan-600",bgColor:"bg-cyan-50",textColor:"text-cyan-700"},{id:"win",name:"Win",icon:d,color:"from-emerald-500 to-emerald-600",bgColor:"bg-emerald-50",textColor:"text-emerald-700"},{id:"high",name:"High",icon:c.A,color:"from-green-500 to-green-600",bgColor:"bg-green-50",textColor:"text-green-700"},{id:"low",name:"Low",icon:h.A,color:"from-amber-500 to-amber-600",bgColor:"bg-amber-50",textColor:"text-amber-700"},{id:"follow-up",name:"Follow Up",icon:m.A,color:"from-orange-500 to-orange-600",bgColor:"bg-orange-50",textColor:"text-orange-700"}],T=async()=>{try{w(!0);let e={page:1,limit:200};a&&(e.search=a);let t=await v.A.get("/contacts",{params:e});console.log("Leads response:",t.data),j(t.data.contacts||t.data.data||[]),M(t.data.total||0)}catch(e){console.error("Failed to fetch contacts:",e),A("Failed to load leads")}finally{w(!1)}};(0,s.useEffect)(()=>{T()},[a]);let H=()=>{I({email:"",firstName:"",lastName:"",phone:"",status:"lead",source:"manual",tags:["new-lead"]}),_("")},O=async e=>{var a,t,l,s,r,o,i,n,d;e.preventDefault(),_(""),E(!0);try{let e={firstName:q.firstName,lastName:q.lastName,email:q.email,status:q.status,source:q.source,tags:q.tags};(null==(a=q.phone)?void 0:a.trim())&&(e.phone=q.phone.trim()),(null==(t=q.notes)?void 0:t.trim())&&(e.notes=q.notes.trim()),q.companyId&&(e.companyId=q.companyId),console.log("Sending contact data:",e);let l=await v.A.post("/contacts",e);L(!1),H(),l.data&&(j(e=>[l.data,...e]),M(e=>e+1)),setTimeout(()=>{T()},500)}catch(t){console.error("Failed to create contact:",t),console.error("Error response:",null==(l=t.response)?void 0:l.data),console.error("Form data sent:",q);let e=(null==(r=t.response)||null==(s=r.data)?void 0:s.message)||(null==(i=t.response)||null==(o=i.data)?void 0:o.error)||"Failed to create lead",a=null==(d=t.response)||null==(n=d.data)?void 0:n.errors;a?(console.error("Validation errors:",a),_("".concat(e,": ").concat(JSON.stringify(a)))):_(e)}finally{E(!1)}},B=async(e,a)=>{try{var t;j(t=>t.map(t=>{var l;return t.id===e.id?{...t,tags:[a,...(null==(l=t.tags)?void 0:l.filter(e=>!P.map(e=>e.id).includes(e)))||[]]}:t}));let l=P.map(e=>e.id),s=(null==(t=e.tags)?void 0:t.filter(e=>l.includes(e)))||[];s.length>0&&await v.A.delete("/contacts/".concat(e.id,"/tags"),{data:{tags:s}}),await v.A.post("/contacts/".concat(e.id,"/tags"),{tags:[a]}),setTimeout(()=>T(),300)}catch(e){console.error("Failed to move lead:",e),T()}};return N?(0,l.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,l.jsx)(x.A,{className:"h-8 w-8 animate-spin text-indigo-600"})}):k?(0,l.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("p",{className:"text-red-600 font-semibold",children:k})})}):(0,l.jsxs)("div",{className:"space-y-6 h-full flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Pipeline"}),(0,l.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Manage your leads through the sales pipeline (",C," total)"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("button",{onClick:T,disabled:N,className:"flex items-center gap-2 rounded-xl bg-white border border-gray-300 px-4 py-2.5 text-sm font-semibold text-gray-700 hover:bg-gray-50 transition-all disabled:opacity-50",children:[N?(0,l.jsx)(x.A,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),(0,l.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center gap-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg hover:shadow-xl transition-all",children:[(0,l.jsx)(u.A,{className:"h-4 w-4"}),"Add Lead"]})]})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(g.A,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-indigo-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search leads by name, email, or company...",value:a,onChange:e=>t(e.target.value),className:"w-full rounded-xl border border-indigo-200/50 bg-white/50 py-3 pl-11 pr-4 text-sm placeholder:text-gray-500 focus:border-indigo-400 focus:bg-white focus:outline-none focus:ring-4 focus:ring-indigo-100 transition-all shadow-sm"})]}),(0,l.jsx)("div",{className:"flex-1 overflow-x-auto pb-6",children:(0,l.jsx)("div",{className:"flex gap-4 min-w-max h-full",children:P.map(e=>{let a,t=e.icon,s=(a=e.id,r.filter(e=>{var t;return null==(t=e.tags)?void 0:t.includes(a)}));return(0,l.jsxs)("div",{className:"flex flex-col w-80 bg-gray-50 rounded-xl border border-gray-200 shadow-sm",children:[(0,l.jsx)("div",{className:"p-4 rounded-t-xl bg-gradient-to-r ".concat(e.color),children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-white",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(t,{className:"h-5 w-5"}),(0,l.jsx)("h3",{className:"font-semibold",children:e.name})]}),(0,l.jsx)("span",{className:"bg-white/20 px-2.5 py-1 rounded-full text-xs font-bold",children:s.length})]})}),(0,l.jsx)("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto max-h-[calc(100vh-280px)]",children:0===s.length?(0,l.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No leads in this stage"}):s.map(a=>{var t;return(0,l.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 shadow-sm hover:shadow-md transition-all cursor-pointer group",children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:[a.firstName," ",a.lastName]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(p.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"truncate",children:a.email})]}),a.phone&&(0,l.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(i.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:a.phone})]}),a.company&&(0,l.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[(0,l.jsx)(b,{className:"h-3 w-3"}),(0,l.jsx)("span",{children:a.company.name})]})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,l.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Lead Score"}),(0,l.jsxs)("span",{className:"text-xs font-bold text-gray-900",children:[a.leadScore,"/100"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,l.jsx)("div",{className:"h-1.5 rounded-full transition-all ".concat((t=a.leadScore)>=75?"bg-green-500":t>=50?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(a.leadScore,"%")}})})]}),(0,l.jsx)("div",{className:"pt-3 border-t border-gray-100",children:(0,l.jsxs)("select",{onChange:e=>B(a,e.target.value),value:e.id,className:"w-full text-xs px-2 py-1.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white",children:[(0,l.jsx)("option",{value:e.id,children:"Move to..."}),P.filter(a=>a.id!==e.id).map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,l.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:["Added ",new Date(a.createdAt).toLocaleDateString()]})]},a.id)})})]},e.id)})})}),S&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:(0,l.jsxs)("div",{className:"relative w-full max-w-2xl mx-4 glass-effect rounded-2xl shadow-2xl animate-scale-in",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Lead"}),(0,l.jsx)("button",{onClick:()=>{L(!1),H()},className:"rounded-xl p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-all",children:(0,l.jsx)(y.A,{className:"h-6 w-6"})})]}),(0,l.jsxs)("form",{onSubmit:O,className:"p-6 space-y-5",children:[F&&(0,l.jsxs)("div",{className:"flex items-start gap-3 rounded-xl bg-red-50 border border-red-200 p-4",children:[(0,l.jsx)(f.A,{className:"h-5 w-5 text-red-600 mt-0.5"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-red-900",children:"Error"}),(0,l.jsx)("p",{className:"text-sm text-red-700 mt-1",children:F})]}),(0,l.jsx)("button",{type:"button",onClick:()=>_(""),className:"text-red-400 hover:text-red-600 transition-colors",children:(0,l.jsx)(y.A,{className:"h-4 w-4"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"First Name *"}),(0,l.jsx)("input",{type:"text",required:!0,disabled:z,value:q.firstName,onChange:e=>I({...q,firstName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"John"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Last Name *"}),(0,l.jsx)("input",{type:"text",required:!0,disabled:z,value:q.lastName,onChange:e=>I({...q,lastName:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"Doe"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,l.jsx)("input",{type:"email",required:!0,disabled:z,value:q.email,onChange:e=>I({...q,email:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"john@example.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),(0,l.jsx)("input",{type:"tel",disabled:z,value:q.phone,onChange:e=>I({...q,phone:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"+1 (555) 123-4567"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Source"}),(0,l.jsxs)("select",{disabled:z,value:q.source,onChange:e=>I({...q,source:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:[(0,l.jsx)("option",{value:"manual",children:"Manual"}),(0,l.jsx)("option",{value:"website",children:"Website"}),(0,l.jsx)("option",{value:"referral",children:"Referral"}),(0,l.jsx)("option",{value:"social_media",children:"Social Media"}),(0,l.jsx)("option",{value:"email_campaign",children:"Email Campaign"}),(0,l.jsx)("option",{value:"cold_outreach",children:"Cold Outreach"}),(0,l.jsx)("option",{value:"event",children:"Event"}),(0,l.jsx)("option",{value:"facebook",children:"Facebook"}),(0,l.jsx)("option",{value:"instagram",children:"Instagram"}),(0,l.jsx)("option",{value:"linkedin",children:"LinkedIn"}),(0,l.jsx)("option",{value:"google-ads",children:"Google Ads"}),(0,l.jsx)("option",{value:"slack",children:"Slack"}),(0,l.jsx)("option",{value:"typeform",children:"Typeform"}),(0,l.jsx)("option",{value:"other",children:"Other"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Initial Stage"}),(0,l.jsx)("select",{disabled:z,value:(null==(e=q.tags)?void 0:e[0])||"new-lead",onChange:e=>I({...q,tags:[e.target.value]}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",children:P.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,l.jsxs)("div",{className:"col-span-2",children:[(0,l.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,l.jsx)("textarea",{disabled:z,value:q.notes,onChange:e=>I({...q,notes:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 resize-none disabled:bg-gray-50 disabled:cursor-not-allowed transition-all",placeholder:"Add any additional notes about this lead..."})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{L(!1),H()},disabled:z,className:"px-6 py-3 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:z,className:"px-6 py-3 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-all",children:z?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.A,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.A,{className:"h-4 w-4"}),"Create Lead"]})})]})]})]})})]})}},7621:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var l=t(5125);let s="https://slackcrm-backend.fly.dev/api/v1",r=l.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),o=!1,i=[],n=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.forEach(t=>{e?t.reject(e):t.resolve(a)}),i=[]};r.interceptors.request.use(e=>{{let a=localStorage.getItem("accessToken");a&&e.headers&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{var a;let t=e.config;if((null==(a=e.response)?void 0:a.status)===401&&!t._retry){if(o)return new Promise((e,a)=>{i.push({resolve:e,reject:a})}).then(e=>(t.headers&&(t.headers.Authorization="Bearer ".concat(e)),r(t))).catch(e=>Promise.reject(e));t._retry=!0,o=!0;{let a=localStorage.getItem("refreshToken");if(!a)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{accessToken:e,refreshToken:i}=(await l.A.post("".concat(s,"/auth/refresh"),{refreshToken:a})).data;return localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",i),t.headers&&(t.headers.Authorization="Bearer ".concat(e)),n(null,e),o=!1,r(t)}catch(e){return n(e,null),o=!1,localStorage.clear(),window.location.href="/login",Promise.reject(e)}}}return Promise.reject(e)});let d=r},9141:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});let l=(0,t(1847).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=6911)),_N_E=e.O()}]);