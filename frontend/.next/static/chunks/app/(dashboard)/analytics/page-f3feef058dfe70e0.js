(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{534:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},814:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},1169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1524:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},1761:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},4013:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),l=a(5299),i=a(1169),o=a(1761),c=a(814),n=a(6052),d=a(8874),x=a(1524),h=a(534),m=a(7621);function g(){let[e,t]=(0,r.useState)(null),[a,g]=(0,r.useState)([]),[u,y]=(0,r.useState)([]),[p,f]=(0,r.useState)(!0),[b,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{f(!0);let[e,a,s]=await Promise.all([m.A.get("/contacts/analytics/overview"),m.A.get("/contacts/analytics/by-tags"),m.A.get("/contacts/analytics/conversion-funnel")]);t(e.data),g(a.data),y(s.data)}catch(e){console.error("Failed to fetch analytics:",e),j("Failed to load analytics data")}finally{f(!1)}};if(p)return(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsx)(l.A,{className:"h-8 w-8 animate-spin text-indigo-600"})});if(b||!e)return(0,s.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-red-600 font-semibold",children:b||"No data available"})})});let N=[{title:"Total Leads",value:e.total.toLocaleString(),icon:i.A,color:"from-blue-500 to-cyan-500",textColor:"text-blue-600"},{title:"High-Ticket Leads",value:e.highTicketLeads.toLocaleString(),icon:o.A,color:"from-green-500 to-emerald-500",textColor:"text-green-600"},{title:"Low-Ticket Leads",value:e.lowTicketLeads.toLocaleString(),icon:c.A,color:"from-purple-500 to-pink-500",textColor:"text-purple-600"},{title:"Follow-Up Needed",value:e.followUpNeeded.toLocaleString(),icon:n.A,color:"from-orange-500 to-red-500",textColor:"text-orange-600"},{title:"Lost Leads",value:e.lostLeads.toLocaleString(),icon:d.A,color:"from-red-500 to-pink-500",textColor:"text-red-600"},{title:"Conversion Rate",value:"".concat(e.conversionRate,"%"),icon:x.A,color:"from-indigo-500 to-blue-500",textColor:"text-indigo-600"},{title:"Avg Lead Score",value:"".concat(e.averageLeadScore,"/100"),icon:h.A,color:"from-yellow-500 to-orange-500",textColor:"text-yellow-600"},{title:"Recently Added",value:e.recentlyAdded.toLocaleString(),icon:i.A,color:"from-teal-500 to-cyan-500",textColor:"text-teal-600"}];return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent",children:"Analytics Dashboard"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Track your lead performance, conversions, and pipeline health"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:N.map(e=>{let t=e.icon;return(0,s.jsx)("div",{className:"relative overflow-hidden rounded-2xl bg-white p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:e.value})]}),(0,s.jsx)("div",{className:"rounded-xl bg-gradient-to-br ".concat(e.color," p-3"),children:(0,s.jsx)(t,{className:"h-6 w-6 text-white"})})]})},e.title)})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Lead Status Distribution"}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(e.byStatus).map(t=>{let[a,r]=t,l=e.total>0?(r/e.total*100).toFixed(1):0;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:a}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[r," (",l,"%)"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"".concat({lead:"bg-gray-500",prospect:"bg-blue-500",qualified:"bg-green-500",customer:"bg-purple-500"}[a]," h-3 rounded-full transition-all duration-500"),style:{width:"".concat(l,"%")}})})]},a)})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Lead Sources"}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(e.bySource).map(t=>{let[a,r]=t,l=e.total>0?(r/e.total*100).toFixed(1):0;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:a}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[r," (",l,"%)"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-indigo-500 h-3 rounded-full transition-all duration-500",style:{width:"".concat(l,"%")}})})]},a)})})]})]}),a.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Tag Performance"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Tag"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Count"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Percentage"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Avg Score"})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"inline-flex items-center rounded-full bg-indigo-100 px-3 py-1 text-sm font-medium text-indigo-700",children:e.tag})}),(0,s.jsx)("td",{className:"py-3 px-4 text-right text-sm text-gray-900",children:e.count}),(0,s.jsxs)("td",{className:"py-3 px-4 text-right text-sm text-gray-900",children:[e.percentage.toFixed(1),"%"]}),(0,s.jsxs)("td",{className:"py-3 px-4 text-right text-sm font-semibold text-gray-900",children:[e.averageLeadScore.toFixed(0),"/100"]})]},e.tag))})]})})]}),u.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Conversion Funnel"}),(0,s.jsx)("div",{className:"space-y-4",children:u.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-sm",children:t+1}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:e.stage})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[e.count," leads"]}),t>0&&(0,s.jsxs)("span",{className:"text-sm text-green-600 font-semibold",children:[e.conversionRate.toFixed(1),"% conversion"]})]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-4 rounded-full transition-all duration-500",style:{width:"".concat(e.percentage,"%")}})})]},e.stage))})]})]})}},5299:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6052:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},7621:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5125);let r="http://localhost:3000/api/v1",l=s.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),i=!1,o=[],c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o.forEach(a=>{e?a.reject(e):a.resolve(t)}),o=[]};l.interceptors.request.use(e=>{{let t=localStorage.getItem("accessToken");t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null==(t=e.response)?void 0:t.status)===401&&!a._retry){if(i)return new Promise((e,t)=>{o.push({resolve:e,reject:t})}).then(e=>(a.headers&&(a.headers.Authorization="Bearer ".concat(e)),l(a))).catch(e=>Promise.reject(e));a._retry=!0,i=!0;{let t=localStorage.getItem("refreshToken");if(!t)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{accessToken:e,refreshToken:o}=(await s.A.post("".concat(r,"/auth/refresh"),{refreshToken:t})).data;return localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",o),a.headers&&(a.headers.Authorization="Bearer ".concat(e)),c(null,e),i=!1,l(a)}catch(e){return c(e,null),i=!1,localStorage.clear(),window.location.href="/login",Promise.reject(e)}}}return Promise.reject(e)});let n=l},8874:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},9945:(e,t,a)=>{Promise.resolve().then(a.bind(a,4013))}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=9945)),_N_E=e.O()}]);