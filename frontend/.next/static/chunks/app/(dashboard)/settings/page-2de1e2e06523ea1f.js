(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{508:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4206:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var t=a(5155),r=a(2115),l=a(508),o=a(9708),n=a(5998),i=a(9408),d=a(5299),c=a(5917),u=a(6132),m=a(7621);function x(){let[e,s]=(0,r.useState)("profile"),[a,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[g,b]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),[v,w]=(0,r.useState)(""),[j,N]=(0,r.useState)({firstName:"",lastName:"",email:""}),[k,P]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{A()},[]);let A=async()=>{try{p(!0);let e=await m.A.get("/auth/me");x(e.data),N({firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email})}catch(e){console.error("Failed to fetch profile:",e),w("Failed to load profile")}finally{p(!1)}},S=async e=>{e.preventDefault(),b(!0),w(""),f(!1);try{await m.A.put("/auth/profile",j),f(!0),A(),setTimeout(()=>f(!1),3e3)}catch(e){var s,a;w((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Failed to update profile")}finally{b(!1)}},C=async e=>{if(e.preventDefault(),k.newPassword!==k.confirmPassword)return void w("Passwords do not match");b(!0),w(""),f(!1);try{await m.A.put("/auth/password",{currentPassword:k.currentPassword,newPassword:k.newPassword}),f(!0),P({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>f(!1),3e3)}catch(e){var s,a;w((null==(a=e.response)||null==(s=a.data)?void 0:s.message)||"Failed to change password")}finally{b(!1)}},M=[{id:"profile",name:"Profile",icon:l.A},{id:"security",name:"Security",icon:o.A},{id:"notifications",name:"Notifications",icon:n.A},{id:"workspace",name:"Workspace",icon:i.A}];return h?(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsx)(d.A,{className:"h-8 w-8 animate-spin text-indigo-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your account settings and preferences"})]}),(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:M.map(a=>{let r=a.icon;return(0,t.jsxs)("button",{onClick:()=>s(a.id),className:"flex items-center gap-2 border-b-2 py-4 px-1 text-sm font-medium transition-colors ".concat(e===a.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,t.jsx)(r,{className:"h-5 w-5"}),a.name]},a.id)})})}),y&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,t.jsx)(c.A,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:"Changes saved successfully!"})]}),v&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-4 rounded-lg bg-red-50 border border-red-200",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:v})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:["profile"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Update your account's profile information and email address."})]}),(0,t.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,t.jsx)("input",{type:"text",value:j.firstName,onChange:e=>N({...j,firstName:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,t.jsx)("input",{type:"text",value:j.lastName,onChange:e=>N({...j,lastName:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,t.jsx)("input",{type:"email",value:j.email,onChange:e=>N({...j,email:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),(0,t.jsx)("input",{type:"text",value:(null==a?void 0:a.role)||"",disabled:!0,className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-50 text-gray-500 cursor-not-allowed"})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"rounded-lg bg-blue-600 px-6 py-2.5 text-sm font-semibold text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":"Save Changes"})})]})]}),"security"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Ensure your account is using a long, random password to stay secure."})]}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,t.jsx)("input",{type:"password",value:k.currentPassword,onChange:e=>P({...k,currentPassword:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,t.jsx)("input",{type:"password",value:k.newPassword,onChange:e=>P({...k,newPassword:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,t.jsx)("input",{type:"password",value:k.confirmPassword,onChange:e=>P({...k,confirmPassword:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:g,className:"rounded-lg bg-blue-600 px-6 py-2.5 text-sm font-semibold text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Updating...":"Update Password"})})]})]}),"notifications"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Manage how you receive notifications and updates."})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Notification settings coming soon..."})})]}),"workspace"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Workspace Settings"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Manage your workspace settings and preferences."})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Workspace ID"}),(0,t.jsx)("input",{type:"text",value:(null==a?void 0:a.workspaceId)||"",disabled:!0,className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-50 text-gray-500 cursor-not-allowed font-mono text-sm"})]})})]})]})]})}},5299:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5917:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5998:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},6132:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7621:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var t=a(5125);let r="http://localhost:3000/api/v1",l=t.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),o=!1,n=[],i=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.forEach(a=>{e?a.reject(e):a.resolve(s)}),n=[]};l.interceptors.request.use(e=>{{let s=localStorage.getItem("accessToken");s&&e.headers&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var s;let a=e.config;if((null==(s=e.response)?void 0:s.status)===401&&!a._retry){if(o)return new Promise((e,s)=>{n.push({resolve:e,reject:s})}).then(e=>(a.headers&&(a.headers.Authorization="Bearer ".concat(e)),l(a))).catch(e=>Promise.reject(e));a._retry=!0,o=!0;{let s=localStorage.getItem("refreshToken");if(!s)return localStorage.clear(),window.location.href="/login",Promise.reject(e);try{let{accessToken:e,refreshToken:n}=(await t.A.post("".concat(r,"/auth/refresh"),{refreshToken:s})).data;return localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",n),a.headers&&(a.headers.Authorization="Bearer ".concat(e)),i(null,e),o=!1,l(a)}catch(e){return i(e,null),o=!1,localStorage.clear(),window.location.href="/login",Promise.reject(e)}}}return Promise.reject(e)});let d=l},8977:(e,s,a)=>{Promise.resolve().then(a.bind(a,4206))},9408:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},9708:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=8977)),_N_E=e.O()}]);